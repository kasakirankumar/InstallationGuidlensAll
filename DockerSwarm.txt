Swarm setup
Prerequisites
2 or more - Ubuntu 16.04 Server (if aws mahines change the security group to allow traffic)
manager     
worker01  
worker02 
Root privileges
-------------------------
Edit vim /etc/hosts on both machines add below lines change the ip address 
root@ip-172-31-24-107:~# cat /etc/hosts
18.222.159.153 manager
13.58.74.39 worker01
18.220.166.15 worker02

ping all the nodes using 'hostname' instead using IP address
ping -c 3 managerping -c 3 worker01
Ping –c3 worker02
-------------------------------------------------------
Install Docker-ce on all the machines

sudo apt install apt-transport-https software-properties-common ca-certificates -y

Add the Docker key and the Docker-ce repository to our servers
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -
sudo echo "deb [arch=amd64] https://download.docker.com/linux/ubuntu xenial stable" > /etc/apt/sources.list.d/docker-ce.list

Update the repository and install Docker-ce packages
sudo apt update
sudo apt install docker-ce -y

start the docker service and enable it to launch every time at system boot
systemctl start docker
systemctl enable docker

we will configure docker to run as a normal user or non-root user
Create a new user named 'dockeruser' and add it to the 'docker' group.
useradd -m -s /bin/bash dockeruser
sudo usermod -aG docker dockeruser

Now login to the 'dockeruser' user and run the docker hello-world command as below
su - dockeruser
docker run hello-world
---------------------------------------------------------

Create the Swarm Cluster
docker swarm init --advertise-addr 13.232.148.157  (Managenode publicip)

O/P--'join-token' has been generated by the 'manager' node.
we need to add the 'worker01' node to the cluster 'manager'. And to do that, we need a 'join-token' from the cluster 'manager' node
Go to worker01 node and run the below command 

docker swarm join --token  tokenpasterhere  (this command need to run in worker node to join with cluster)
docker node ls  (3 should show)
------------------------ Now Cluster is ready, deploy services on it
